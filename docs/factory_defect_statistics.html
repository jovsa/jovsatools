---

title: Factory Defect Statistics


keywords: fastai
sidebar: home_sidebar



nb_path: "notebooks/factory_defect_statistics.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/factory_defect_statistics.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Question">Question<a class="anchor-link" href="#Question"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are 2 factories producing tablets: one produces tablets with probability of defect 20%,  another with probability of defect 80%</p>
<p>We have ordered single shipment having 2 tablets and received the entire shipment from the factory chosen evenly.</p>
<p>We opened the first tablet and it has a defect,  what is the probability that the second tablet having defect as well ?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Assumptions</strong>:</p>
<ul>
<li>Factory defects are independent and can be sampled without replacement</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Statistical-Approach">Statistical Approach<a class="anchor-link" href="#Statistical-Approach"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">ans = 0.5 * case 1 + 0.5* case_2</span>

<span class="sd">s.t: </span>
<span class="sd">    case 1 [factory 1] = P(exactly 2 defects from factory 1) </span>
<span class="sd">    case 2 [factory 2] = P(exactly 2 defects from factory 2) </span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">case_1</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">binom</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;case_1: </span><span class="si">{</span><span class="n">case_1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">case_2</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">binom</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;case_2: </span><span class="si">{</span><span class="n">case_2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">ans</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">case_1</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">case_2</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ans:</span><span class="si">{</span><span class="n">ans</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>case_1: 0.04000000000000001
case_2: 0.64
ans:0.34
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Numerical-Approach">Numerical Approach<a class="anchor-link" href="#Numerical-Approach"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Simulator</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factory_defect_rate</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">choose_factory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">is_defect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factory</span><span class="p">):</span>
        <span class="n">defect_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">factory_defect_rate</span><span class="p">[</span><span class="n">factory</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">defect_rate</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    
    <span class="k">def</span> <span class="nf">produce_shipment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shipment_size</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">choose_factory</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">shipment_size</span><span class="p">):</span>
            <span class="n">is_defect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_defect</span><span class="p">(</span><span class="n">factory</span><span class="p">)</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_defect</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_defect</span><span class="p">:</span> 
                <span class="c1"># (factory, item, is_defective)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stats</span><span class="p">[(</span><span class="n">factory</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># (factory, item, defective)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stats</span><span class="p">[(</span><span class="n">factory</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            
        <span class="c1"># case when both tablets are defective</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stats</span><span class="p">[(</span><span class="n">factory</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trials</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">trial</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">trials</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">produce_shipment</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;trials&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">trials</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">simulator</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">trials</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">ans</span> <span class="o">=</span> <span class="p">(</span><span class="n">simulator</span><span class="o">.</span><span class="n">stats</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">)]</span> <span class="o">+</span> <span class="n">simulator</span><span class="o">.</span><span class="n">stats</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">)])</span><span class="o">/</span><span class="n">simulator</span><span class="o">.</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;trials&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ans:</span><span class="si">{</span><span class="n">ans</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>ans:0.3359
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Jovan's-Debugging">Jovan's Debugging<a class="anchor-link" href="#Jovan's-Debugging"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">stats</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>defaultdict(int,
            {(0, 0, 0): 4019,
             (0, 1, 1): 1013,
             (0, 0, 1): 981,
             (0, 1, 0): 3987,
             (1, 0, 1): 3992,
             (1, 1, 1): 3985,
             (1, &#39;match&#39;): 3160,
             (1, 0, 0): 1008,
             (1, 1, 0): 1015,
             (0, &#39;match&#39;): 199,
             &#39;trials&#39;: 10000})</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{(0, 0, 0): 4074,</span>
<span class="sd"> (0, 0, 1): 1013,</span>
<span class="sd"> (0, 1, 0): 4070,</span>
<span class="sd"> (0, 1, 1): 1017,</span>
<span class="sd"> </span>

<span class="sd"> (1, 0, 0): 1008,</span>
<span class="sd"> (1, 0, 1): 3905,</span>
<span class="sd"> (1, 1, 0): 966,</span>
<span class="sd"> (1, 1, 1): 3947,</span>

<span class="sd"> &#39;trials&#39;: 10000})</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;\n{(0, 0, 0): 4074,\n (0, 0, 1): 1013,\n (0, 1, 0): 4070,\n (0, 1, 1): 1017,\n \n\n (1, 0, 0): 1008,\n (1, 0, 1): 3905,\n (1, 1, 0): 966,\n (1, 1, 1): 3947,\n\n &#39;trials&#39;: 10000})\n\n&#34;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

